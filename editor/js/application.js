define(["sandbox"],function(d){var c=function(){this.modules={};this.sandBox=d;this.allStarted=!1};c.prototype={registerModule:function(a,b){arguments.length===1&&(b=a,a=""+Math.random());a in this.modules||(this.modules[a]=[]);this.modules[a].push(typeof b==="function"?{builder:b}:{instance:b});this.allStarted&&this.start(a)},start:function(a){if(a in this.modules)for(var a=this.modules[a],b=0;b<a.length;++b)if(a[b].builder)a[b].instance=a[b].builder(this.sandBox)},initialize:function(a){if(a in
this.modules)for(var a=this.modules[a],b=0;b<a.length;++b)"init"in a[b].instance&&a[b].instance.init()},stop:function(a){if(a in this.modules)for(var a=this.modules[a],b=0;b<a.length;++b)if("destroy"in a[b].instance)a[b].instance.destroy(),a[b].instance=void 0},startAll:function(){this.allStarted=!0;for(var a in this.modules)this.start(a);for(a in this.modules)this.initialize(a)},stopAll:function(){this.allStarted=!1;for(var a in this.modules)this.stop(a)}};return new c});