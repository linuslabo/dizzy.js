define(["sandbox"],function(b){var c,e=!1,f={depends:["zoom","pan","zebra","resizer"],start:function(){e&&($(c.svg.root()).addClass("editing default"),this.bindMouselistener(),this.bindKeyboardlistener())},stop:function(){e&&($(c.svg.root()).removeClass("editing default"),this.unbindMouselistener(),this.unbindKeyboardlistener())},bindMouselistener:function(){var a=c.svg.root();$(a).delegate("g.group","click.dizzy.default touchstart.dizzy.default",function(a){a.preventDefault();a.stopPropagation();
var d=c.findGroup(this);b.publish("dizzy.presentation.group.selected",{group:d,event:a});return!1});$(document).bind("contextmenu",function(a){a.preventDefault();a.stopPropagation();return!1})},unbindMouselistener:function(){var a=c.svg.root();$(a).undelegate("g.group","click.dizzy.default  touchstart.dizzy.default");$(document).unbind("contextmenu")},bindKeyboardlistener:function(){$(document).bind("keydown.dizzy.default",function(a){if((a.keyCode?a.keyCode:a.which)==46)if(a=c.findGroup("g.selected"))c.removeGroup(a),
b.publish("dizzy.presentation.transform")})},unbindKeyboardlistener:function(){$(document).unbind("keydown.dizzy.default")}};b.subscribe("dizzy.presentation.loaded",function(a){c=a.canvas;e=!0});b.subscribe("dizzy.ui.toolbar.color.fill.changed",function(a){var b=c.findGroup("g.selected");b&&b.dom().children().first().attr("fill",a.color)});b.subscribe("dizzy.ui.toolbar.color.stroke.changed",function(a){var b=c.findGroup("g.selected");b&&b.dom().children().first().attr("stroke",a.color)});var d;b.subscribe("dizzy.presentation.group.selected",
function(a){d!==void 0&&$(d).removeClass("selected");d=$(a.group.dom());d.addClass("selected")});b.subscribe("dizzy.presentation.transform",function(){d!==void 0&&(d.removeClass("selected"),b.publish("dizzy.presentation.group.unselected"))});return{init:function(){b.publish("dizzy.modes.register",{name:"tool-default",instance:f})},destroy:function(){}}});