define(["sandbox"],function(a){var c,e=!1,f,g={start:function(){e=!0},stop:function(){e=!1}},h;a.subscribe("dizzy.canvas.io.mouse.down",function(i){h=!1;if(e){var g=$(document),d={x:i.pageX,y:i.pageY},d=c.vectorTranslate(d);a.publish("dizzy.presentation.transform.start");g.bind("mousemove.dizzy.canvas.pan",function(b){h=!0;b={x:b.pageX,y:b.pageY};b=c.vectorTranslate(b);b=f.transformation().translate(b.x-d.x,b.y-d.y);a.publish("dizzy.presentation.transform.do");c.transform(f,b,{duration:0})})}});a.subscribe("dizzy.canvas.io.mouse.up",
function(){$(document).unbind("mousemove.dizzy.canvas.pan");a.publish("dizzy.presentation.transform.end");return!h});a.subscribe("dizzy.presentation.loaded",function(a){c=a.canvas;f=c.getGroup(0)});return{init:function(){a.publish("dizzy.modes.register",{name:"pan",instance:g})},destroy:function(){}}});