define(["sandbox","dizzy/canvas"],function(b,e){var c,a;b.subscribe("dizzy.presentation.load",function(d){c!==void 0&&a!==void 0&&(a.addClass("loading"),c.load(d.file,{success:function(){c.gotoGroup(0);b.publish("dizzy.presentation.loaded",{canvas:c});$(window).bind("resize",function(){var a=$(c.svg.root());a.width($(document).width());a.height($(document).height())});$(window).resize();$(c.svg.root()).attr("style",'width: "'+$(document).width()+'" height="'+$(document).width()+'"');a.removeClass("loading")}}))});
b.subscribe("dizzy.presentation.loadSVG",function(d){d=d.svgDoc;a.remove();var f=$("#container");a=$('<div id="dizzy" class="loading" />');f.append(a);a.disableTextSelect();c=new e("#dizzy");b.publish("dizzy.presentation.load",{file:d});a.bind("mousedown",function(a){b.publish("dizzy.canvas.io.mouse.down",a)});a.bind("mouseup",function(a){b.publish("dizzy.canvas.io.mouse.up",a)});a.bind("click",function(a){b.publish("dizzy.canvas.io.mouse.click",a)});b.publish("dizzy.ui.toolbar.clicked.mode.tool-default",
{button:"tool-default"})});return{init:function(){var d=$("#container");a=$('<div id="dizzy" class="loading" />');d.append(a);a.disableTextSelect();c=new e("#dizzy");b.publish("dizzy.presentation.load",{file:"./svg/blank.svg"});a.bind("mousedown",function(a){b.publish("dizzy.canvas.io.mouse.down",a)});a.bind("mouseup",function(a){b.publish("dizzy.canvas.io.mouse.up",a)});a.bind("click",function(a){b.publish("dizzy.canvas.io.mouse.click",a)})},destroy:function(){$("dizzy").remove()}}});