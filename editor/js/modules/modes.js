define(["sandbox"],function(e){function f(a){var c=b[a];if(c===void 0)console.log("Mode "+a+" called but not defined");else{console.log("Starting mode: "+a);for(var a=c.depends||[],d=0;d<a.length;++d)f(a[d]);c.start()}}var b={};e.subscribe("dizzy.ui.toolbar.clicked.mode",function(a){for(var c in b)b[c]&&typeof b[c].stop==="function"&&b[c].stop();f(a.button)});e.subscribe("dizzy.modes.register",function(a){b[a.name]===void 0?(console.log("Registering mode: "+a.name),b[a.name]=a.instance):console.log("Mode "+
a.name+" already defined")});return{init:function(){},destroy:function(){}}});