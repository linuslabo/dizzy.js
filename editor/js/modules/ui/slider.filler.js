define(["sandbox"],function(h){var d;h.subscribe("dizzy.presentation.loaded",function(){});h.subscribe("dizzy.ui.slider.loaded",function(e){d=e.slider;d.find("#loader").append('<div class="infiniteCarousel"><div class="wrapper" id="wrapper"><ul id="ulid"></ul></div></div>');d.find("#ulid").load("php/images_loader.php",function(c){c.substring(0,3)=="Not"?(console.log("No project opened, slider will close"),h.publish("dizzy.ui.slider.close")):j()})});var j=function(){$("#wrapper").width($(".infiniteCarousel").innerWidth()-
80);$(window).resize(function(){$("#wrapper").width($(".infiniteCarousel").innerWidth()-80)});(function(){return $(".infiniteCarousel").each(function(){function e(a){var e=f*(a<g?-1:1)*b*Math.abs(g-a);c.filter(":not(:animated)").animate({scrollLeft:"+="+e},1E3,function(){a==0?(c.scrollLeft(f*b*d),a=d):a>d&&(c.scrollLeft(f*b),a=1);g=a});return!1}var c=$("> div",this).css("overflow","hidden"),i=c.find("> ul"),a=i.find("> li"),f=a.filter(":first").outerWidth(!0),b=Math.ceil((c.innerWidth()-f)/f),g=1,
d=Math.ceil(a.length/b);a.length%b!=0&&(i.append(Array(b-a.length%b+1).join('<li class="empty" />')),a=i.find("> li"));a.filter(":first").before(a.slice(-b).clone().addClass("cloned"));a.filter(":last").after(a.slice(0,b).clone().addClass("cloned"));a=i.find("> li");c.scrollLeft(f*b);c.after('<a class="arrow back"></a><a class="arrow forward"></a>');$("a.back",this).click(function(){return e(g-1)});$("a.forward",this).click(function(){return e(g+1)});$(this).bind("goto",function(a,b){e(b)});h.publish("dizzy.ui.slider.filled.",
{})})})()};return{init:function(){},destroy:function(){}}});